<!--
 * @Author: xiaoliu 2558949748@qq.com
 * @Date: 2023-11-25 08:04:48
 * @LastEditors: xiaoliu
 * @LastEditTime: 2023-11-27 03:48:52
 * @FilePath: /code/homework/day1124/index.html
 * @Description: ËøôÊòØÈªòËÆ§ËÆæÁΩÆ,ËØ∑ËÆæÁΩÆ`customMade`, ÊâìÂºÄkoroFileHeaderÊü•ÁúãÈÖçÁΩÆ ËøõË°åËÆæÁΩÆ: https://github.com/OBKoro1/koro1FileHeader/wiki/%E9%85%8D%E7%BD%AE
-->
<!--
 *                        _oo0oo_
 *                       o8888888o
 *                       88" . "88
 *                       (| -_- |)
 *                       0\  =  /0
 *                     ___/`---'\___
 *                   .' \\|     |// '.
 *                  / \\|||  :  |||// \
 *                 / _||||| -:- |||||- \
 *                |   | \\\  - /// |   |
 *                | \_|  ''\---/''  |_/ |
 *                \  .-\__  '-'  ___/-. /
 *              ___'. .'  /--.--\  `. .'___
 *           ."" '<  `.___\_<|>_/___.' >' "".
 *          | | :  `- \`.;`\ _ /`;.`/ - ` : | |
 *          \  \ `_.   \_ __\ /__ _/   .-` /  /
 *      =====`-.____`.___ \_____/___.-`___.-'=====
 *                        `=---='
 * 
 * 
 *      ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
 * 
 *            ‰ΩõÁ•ñ‰øù‰Ωë     Ê∞∏‰∏çÂÆïÊú∫     Ê∞∏Êó†BUG
 * 
 *        ‰ΩõÊõ∞:  
 *                ÂÜôÂ≠óÊ•ºÈáåÂÜôÂ≠óÈó¥ÔºåÂÜôÂ≠óÈó¥ÈáåÁ®ãÂ∫èÂëòÔºõ  
 *                Á®ãÂ∫è‰∫∫ÂëòÂÜôÁ®ãÂ∫èÔºåÂèàÊãøÁ®ãÂ∫èÊç¢ÈÖíÈí±„ÄÇ  
 *                ÈÖíÈÜíÂè™Âú®ÁΩë‰∏äÂùêÔºåÈÖíÈÜâËøòÊù•ÁΩë‰∏ãÁú†Ôºõ  
 *                ÈÖíÈÜâÈÖíÈÜíÊó•Â§çÊó•ÔºåÁΩë‰∏äÁΩë‰∏ãÂπ¥Â§çÂπ¥„ÄÇ  
 *                ‰ΩÜÊÑøËÄÅÊ≠ªÁîµËÑëÈó¥Ôºå‰∏çÊÑøÈû†Ë∫¨ËÄÅÊùøÂâçÔºõ  
 *                Â•îÈ©∞ÂÆùÈ©¨Ë¥µËÄÖË∂£ÔºåÂÖ¨‰∫§Ëá™Ë°åÁ®ãÂ∫èÂëò„ÄÇ  
 *                Âà´‰∫∫Á¨ëÊàëÂøíÁñØÁô´ÔºåÊàëÁ¨ëËá™Â∑±ÂëΩÂ§™Ë¥±Ôºõ  
 *                ‰∏çËßÅÊª°Ë°óÊºÇ‰∫ÆÂ¶πÔºåÂì™‰∏™ÂΩíÂæóÁ®ãÂ∫èÂëòÔºü
 -->

<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <!-- <meta http-equiv="X-UA-Compatible" content="IE=edge"> -->
    <meta http-equiv="Access-Control-Allow-Origin" content="*">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ÁôªÂΩï</title>
    <link rel="icon" href="https://raw.githubusercontent.com/Liu670/cloudimg/main/PicList/html/favicon.ico">
    <link rel="stylesheet" href="style.css">
    <script src="http://liu.ihong.love:81/file/html/js/jquery-3.7.1.js"></script>
    <script src="index.js"></script>
</head>

<body>


    <div class="container">
        <div class="panda">
            <!-- Â∑¶ËÄ≥ -->
            <div class="ear left"></div>
            <!-- Âè≥ËÄ≥ -->
            <div class="ear right"></div>
            <!-- ËÑ∏ -->
            <div class="face">
                <!-- ÁúºÁùõ -->
                <div class="eye-shadow left">
                    <div class="eye-white left">
                        <div class="eye-ball"></div>
                    </div>
                </div>
                <div class="eye-shadow right">
                    <div class="eye-white right">
                        <div class="eye-ball"></div>
                    </div>
                </div>
                <!-- ÈºªÂ≠ê -->
                <div class="nose"></div>
                <!-- Âò¥Â∑¥ -->
                <div class="mouth"></div>
            </div>
            <!-- Ë∫´Â≠ê -->
            <div class="body"></div>
            <!-- ËÑö -->
            <div class="foot left">
                <!-- ËÑöÂ∫ï -->
                <div class="sole"></div>
            </div>
            <div class="foot right">
                <!-- ËÑöÂ∫ï -->
                <div class="sole"></div>
            </div>

        </div>

        <!-- ÁôªÂΩïÊ°Ü -->
        <div class="login-box none1">
            <div class="hand left"></div>
            <div class="hand right"></div>
            <h1>Áî®Êà∑ÁôªÂΩï</h1>
            <div class="ipt-box">
                <input type="text" required id="loginId">
                <label for="">Áî®Êà∑Âêç</label>
                <div class="reg">Ê≤°ÊúâË¥¶Âè∑?Á´ãÂç≥Ê≥®ÂÜå</div>
            </div>
            <div class="ipt-box">
                <input class="pwd" type="password" required id="password" class="on">
                <label for="">ÂØÜÁ†Å</label>
                <button type="button" class="show" value="üëÄ" style="background-color:#fff;">^_^</button>
            </div>
            <button class="loginButton">ÁôªÂΩï</button>
            <span class="log"></span>
        </div>

        <!-- Ê≥®ÂÜåÊ°Ü -->
        <div class="reg-box none">
            <div class="hand left"></div>
            <div class="hand right"></div>
            <h1>Áî®Êà∑Ê≥®ÂÜå</h1>
            <div class="ipt-box">
                <input type="text" required id="regName">
                <label for="">Áî®Êà∑Âêç</label>
            </div>
            <div class="ipt-box">
                <input class="pwd" type="password" required id="password1" class="on">
                <label for="">ÂØÜÁ†Å</label>
                <button type="button" class="show" value="üëÄ" style="background-color:#fff;">^_^</button>
            </div>
            <div class="ipt-box">
                <input class="pwd" type="password" required id="password2" class="on">
                <label for="">ÈáçÂ§çÂØÜÁ†Å</label>
                <button type="button" class="show" value="üëÄ" style="background-color:#fff;">^_^</button>
            </div>
            <button class="registerButton">Ê≥®ÂÜå</button>
            <div class="loginBtn">Â∑≤ÊúâË¥¶Âè∑ÔºåÂéªÁôªÂΩï</div>
            <span class="log"></span>

        </div>

    </div>


</body>

</html>

<script>
    $(".pwd")
        .focusin(function () {
            // ÂØÜÁ†ÅÊ°ÜÈÄâ‰∏≠
            $(".login-box").addClass("up");
            $(".eye-white").addClass("offeye");
        })
        .focusout(function () {
            // ÂØÜÁ†ÅÊ°ÜÈùûÈÄâ‰∏≠
            $(".login-box").removeClass("up");
            $(".eye-white").removeClass("offeye");
        });

    // Èº†Ê†á‰ΩçÁΩÆÁßªÂä® ÁúºÁùõË∑üÁùÄÂä®
    $(document).on("mousemove", function (e) {
        let dw = $(document).width() / 20;
        let dh = $(document).height() / 15;
        let x = e.pageX / dw;
        let y = e.pageY / dh;
        // console.log(e.pageX, e.pageY);
        $(".eye-ball").css({
            left: e.pageX / dw,
            top: e.pageY / dh,
        });
    });

    // ÁÇπÂáªÁúºÁùõÊòæÁ§∫ÂØÜÁ†Å
    $(".show").click(function () {
        // Â¶ÇÊûúÊúâonÁöÑÂ±ûÊÄß ÂàôËØ¥ÊòéÂØÜÁ†ÅÁ±ªÂûã ‰∏çÂèØËßÅ
        if ($(".pwd").hasClass("on")) {
            $(".pwd").removeClass("on");
            $(".pwd").attr({ type: "password" });
            $(".show").text(">_<");
        } else {
            $(".pwd").addClass("on");
            $(".pwd").attr("type", "text");
            $(".show").text("üëÄ");
            // $('show').text('^o^');
        }
    });

    // ÁÇπÂáªÂéªÁôªÂΩï
    $(".loginBtn").click(function () {
        // Â∞ÜËæìÂÖ•Ê°ÜÁΩÆÁ©∫
        $("input").val("");
        $(".login-box").removeClass("none");
        $(".reg-box").addClass("none");
    });
    // ÁÇπÂáªÂéªÊ≥®ÂÜå
    $(".reg").click(function () {
        $("input").val("");
        $(".login-box").addClass("none");
        $(".reg-box").removeClass("none");
    });

    // ÁôªÂΩïÂäüËÉΩ
    function login(data) {
        var users = data;
        // ÁôªÂΩïÊàêÂäüË∑≥ËΩ¨ÈìæÊé•  ÁôªÂΩïÈ™åËØÅ
        $(".loginButton").click(function () {
            var u = $("#loginId").val();
            var p = $("#password").val();
            var isExits = true;
            for (const i of users) {
                // Âà§Êñ≠Ë¥¶Âè∑ÊòØÂê¶‰∏ÄËá¥
                if (i.name === u) {
                    // Âà§Êñ≠ÂØÜÁ†Å
                    if (i.password === p) {
                        $(".log").text("üôÜÁôªÂΩïÊàêÂäüÔºÅ");
                        alert("üôÜÁôªÂΩïÊàêÂäüÔºÅ");
                        window.location.href = "https://github.com/Liu670";
                    } else {
                        $(".log").text("‚ùåÂØÜÁ†ÅÈîôËØØ");
                    }
                    break;
                } else {
                    isExits = false;
                }
            }
            if (!isExits) {
                $(".log").text("‚ö†Ô∏èË¥¶Âè∑‰∏çÂ≠òÂú®");
            }
            // alert(users[0].user)
            // window.location.href = "https://github.com/Liu670";
        });
    }

    // ÁôªÂΩï
    $(document).ready(function () {
        $.ajax({
            url: "http://liu.ihong.love:8089/loginAndRegister/test.jsp",
            type: "GET",
            dataType: "json",
            // async: true,
            success: function (data) {
                // Âú®ËøôÈáåÂ§ÑÁêÜËé∑ÂèñÂà∞ÁöÑJSONÊï∞ÊçÆ
                // console.log(data);
                login(data);
                register(data);
            },
            error: function (xhr, status, error) {
                // Â§ÑÁêÜËØ∑Ê±ÇÈîôËØØ
                // console.log(error);
            },
        });
    });

    $(document).ready(function () {
        // $.ajax({
        //     url: `http://localhost:8080/loginAndRegister/reg.jsp`,
        //     type: "get",
        //     // data: {
        //     //     name: 'join',
        //     //     age: 19,
        //     // },
        //     username: uname,
        //     password: pwd,
        //     // data: JSON.stringify({ "password": "1", "name": "1" }),
        //     dataType: "text",
        //     contentType: "application/json",
        //     success: function (response) {
        //         // Âú®ËøôÈáåÂ§ÑÁêÜÂêéÁ´ØËøîÂõûÁöÑÂìçÂ∫î
        //         console.log(response);
        //     },
        //     error: function (xhr, status, error) {
        //         // Âú®ËøôÈáåÂ§ÑÁêÜÈîôËØØ
        //     },
        // });
    });

    // Ê≥®ÂÜåÂäüËÉΩ
    function register(data) {
        $(".registerButton").click(function () {
            $(".log").text("");
            // ‰ªéÂâçÁ´ØËé∑ÂèñÊ≥®ÂÜå‰ø°ÊÅØ
            var name = $("#regName").val();
            var pwd1 = $("#password1").val();
            var pwd2 = $("#password2").val();
            // Âà§Êñ≠Ë¥¶Âè∑ÊòØÂê¶Â≠òÂú®
            flag = false; //‰∏çÂ≠òÂú®
            for (var i of data) {
                if (i.name == name) {
                    flag = true;
                    break;
                }
            }
            if (flag) {
                $(".log").text("Ë¥¶Âè∑Â∑≤Â≠òÂú®");
            } else if (!flag && pwd1 != pwd2) {
                $(".log").text("ÂØÜÁ†Å‰∏ç‰∏ÄËá¥");
            } else {
                // ajaxÂêëÂêéÁ´ØÂèëÈÄÅËØ∑Ê±Ç
                $.ajax({
                    url: `http://liu.ihong.love:8089/loginAndRegister/reg.jsp?username=${name}&password1=${pwd1}`,
                    type: "get",
                    username: name,
                    password1: pwd1,
                    password2: pwd2,
                    dataType: "text",
                    // contentType: "application/json",
                    success: function (response) {
                        // Âú®ËøôÈáåÂ§ÑÁêÜÂêéÁ´ØËøîÂõûÁöÑÂìçÂ∫î
                        $(".log").text("Ê≥®ÂÜåÊàêÂäü");
                    },
                    error: function (xhr, status, error) {
                        // Âú®ËøôÈáåÂ§ÑÁêÜÈîôËØØ
                        console.log(error);
                        $(".log").text("Ê≥®ÂÜåÂ§±Ë¥•");
                    },
                });
            }
        });
    }

</script>